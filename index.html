<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Conway's Game of Life</title>
		<script data-main = 'js/main' src = 'lifeFactory.js'></script>
		<script data-main = 'js/main' src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js'></script>
	</head>



<body>

	<center> 
		<h1>Conway's Game of Life! </h1> 

		<canvas id="canvas" width="400px" height="400px"></canvas>
	</center> 
</body>
<script>

	$.get( "http://wsu.zenlink.biz/multiplayerlife/turns/turn0.json", function( data ) 
	{
		//the data variable will contain the data from the url provided
		//in this case it will be the contents of the turn0.json file
		
		//console.log("This is what the raw data looks like:");
		//console.log(data);
		
		//that means we need to parse the JSON back into an object
		
		var obj = data;
		
		//now we can do what ever we want with the obj.
		//in this case I'm just printing it to the console.
		
		//console.log("This is what you have after you parse the json into an object:");	
		//console.log(obj);
		
		paintBoard(obj); 
	
	});
	
	function paintBoard(obj)
	{
		//obj.boardColor.g = 255;
		var canvas = document.getElementById("canvas");
		var ctx = canvas.getContext('2d');
		ctx.fillStyle = 'rgb(' + obj.boardColor.r + ', ' + obj.boardColor.g + ', ' + obj.boardColor.b + ')';
		//ctx.fillRect(100, 100, 100, 100);
		
		var w = 400; 
		var h = 400; 
		
		for (x=0;x<=w;x+=25) 
		{
			for (y=0;y<=h;y+=25) 
			{
				ctx.moveTo(x, 0);
				ctx.lineTo(x, h);
				ctx.stroke();
				ctx.moveTo(0, y);
				ctx.lineTo(w, y);
				ctx.stroke();
			}
		}
		
		canvas.addEventListener('click', function(evt) 
		{
			var mousePos = getSquare(canvas, evt);
			fillSquare(ctx, mousePos.x, mousePos.y)
		}, false);
	}
	
	function getSquare(canvas, evt) 
	{
		var rect = canvas.getBoundingClientRect();
		return {
			x: 1 + (evt.clientX - rect.left) - (evt.clientX - rect.left)%10,
			y: 1 + (evt.clientY - rect.top) - (evt.clientY - rect.top)%10
		};
	}
	
	function fillSquare(ctx, x, y)
	{
		ctx.fillStyle = "gray"
		ctx.fillRect(x,y,24,24);
	}
	
</script> 

</html>